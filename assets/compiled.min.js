Array.prototype.unique=function(){var a,d,c;a=[];for(d=this.length;d--;)c=this[d],-1===$.inArray(c,a)&&a.unshift(c);return a};
(function(a){a.fn.unveil=function(d){function c(){k=f.filter(function(){var c=a(this),d=b.scrollTop(),f=d+b.height(),g=c.offset().top;return g+c.height()>=d-e&&g<=f+e});h=k.trigger("unveil");f=f.not(h)}var b=a(window),e=d||0,g=1<window.devicePixelRatio?"data-src-retina":"data-src",f=this,h,k,m;this.one("unveil",function(){(m=(m=this.getAttribute(g))||this.getAttribute("data-src"))&&this.setAttribute("src",m)});b.scroll(c);b.resize(c);c();return this}})(jQuery);
jQuery.fn.sortElements=function(){var a=[].sort;return function(d,c){c=c||function(){return this};var b=this.map(function(){var a=c.call(this),b=a.parentNode,d=b.insertBefore(document.createTextNode(""),a.nextSibling);return function(){if(b===this)throw Error("You can't sort elements if any one is a descendant of another.");b.insertBefore(this,d);b.removeChild(d)}});return a.call(this,d).each(function(a){b[a].call(c.call(this))})}}();
(function(a,d){var c,b,e,g,f,h={},k={},m=/\[(.*?)\]$/,n={$:!0,"!":!0,"^":!0,"*":!0,"<":!0,">":!0,"~":!0};a.expr[":"].data=function(p,s,r,t){if(p===d||!r[3]||""==r[3])return!1;if(g!==r[3]){var q=r[3];g=q;h[g]?(c=h[g].name,b=h[g].value,e=h[g].condition,f=h[g].eqIndex):(f=q.indexOf("="),-1<f?(c=q.substr(0,f),b=q.substr(f+1)||null):(c=q,b=null),e=c.charAt(c.length-1),!0===n[e]?c=c.substr(0,c.length-1):"]"===e&&(e=m.exec(c)[1],c=c.replace(m,"")),!b||"<"!==e&&">"!==e||"="!==b.charAt(0)?"~"===e?b=RegExp(b.substr(1,
b.lastIndexOf("/")-1),b.split("/").pop()):b&&"=="===b.substr(0,2)&&(e="===",b=b.substr(2)):(b=b.substr(1),e+="="),c=c.split("."),h[g]={name:c,value:b,condition:e,eqIndex:f})}for(var q=-1,u=c.length,l;++q<u;)if((l=l===d?a(p).data(c[q]):l[c[q]])===d||null===l)return!1;if(-1===f)return!0;switch(e){case "!":return l.toString()!==b;case "^":return 0===l.toString().indexOf(b);case "$":return l.toString().substr(l.length-b.length)===b;case "*":return-1!==l.toString().indexOf(b);case ">":return l>b;case ">=":return l>=
b;case "<":return l<b;case "<=":return l<=b;case "===":return l===("false"===b?!1:!0);case "~":return b.test(l.toString());default:return k[e]?k[e].call(p,l,b,s,r,t):l&&l.toString()===b}};a.dataSelector=function(b,c){a.isFunction(c)?k[b]=c:a.extend(k,b||{})}})(jQuery);
(function(a){"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)})(function(a){function d(a){return a}function c(a){return decodeURIComponent(a.replace(e," "))}function b(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return g.json?JSON.parse(a):a}catch(b){}}var e=/\+/g,g=a.cookie=function(e,h,k){if(void 0!==h){k=a.extend({},g.defaults,k);if("number"===typeof k.expires){var m=k.expires,n=k.expires=new Date;n.setDate(n.getDate()+
m)}h=g.json?JSON.stringify(h):String(h);return document.cookie=[encodeURIComponent(e),"=",g.raw?h:encodeURIComponent(h),k.expires?"; expires="+k.expires.toUTCString():"",k.path?"; path="+k.path:"",k.domain?"; domain="+k.domain:"",k.secure?"; secure":""].join("")}h=g.raw?d:c;k=document.cookie.split("; ");for(var m=e?void 0:{},n=0,p=k.length;n<p;n++){var s=k[n].split("="),r=h(s.shift()),s=h(s.join("="));if(e&&e===r){m=b(s);break}e||(m[r]=b(s))}return m};g.defaults={};a.removeCookie=function(b,c){return void 0!==
a.cookie(b)?(a.cookie(b,"",a.extend(c,{expires:-1})),!0):!1}});
(function(a){a.fn.tooltip=function(){$tooltip=a("#tooltip");return this.each(function(){function d(b,c){$tooltip.find(".image").css("backgroundImage","url("+c.find("img").prop("src")+")").end().find("h4").text(c.find("h5").text()).end().find(".made").html(a("#showCheats").is(":checked")?c.data("composition").replace(/\+/g," + ").replace(/;/g,"<br/>"):"").end().find("h5").css("display",c.data("make").length?"block":"none").end().find(".make").html(c.data("make")).end().css({top:b.pageY+10,left:b.pageX+
200>a(window).width()?b.pageX-200:b.pageX+10}).show()}var c=a(this);if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent))c.find(".info").on("click",function(b){b.preventDefault();a("#tooltip").is(":visible")&&$tooltip.find("h4").text()==c.find("h5").text()?a("#tooltip").hide():d(b,c)});else c.find(".info").on("mouseenter",function(a){d(a,c)}).on("mouseleave",function(a){$tooltip.hide()}).on("click",function(a){a.preventDefault()})})};a.fn.clearSearch=function(d){var c=a.extend({focusAfterClear:!0,
linkClass:"icon-remove-sign"},d);return this.each(function(){function b(a){g.val("").change();d();c.focusAfterClear&&"click"==a.type&&g.focus();"function"===typeof c.callback&&c.callback()}function d(){0<g.val().replace(/^\s+|\s+$/g,"").length?f.show():f.hide();g.outerWidth();var a=g.outerHeight();f.css({top:Math.round(a/2-f.height()/2),right:8})}var g=a(this),f;g.parent().hasClass("clear_input")||(g.wrap('<div class="clear_input">'+g.html()+"</div>"),g.after('<a class="'+c.linkClass+'"></a>'));f=
g.next();f.on("click",b);g.on("keyup keydown change",d).on("clear",b);d()})}})(jQuery);
(function(a){a.fn.bootstrapSwitch=function(d){var c={init:function(){return this.each(function(){var b=a(this),c,d,f,h,k="",m=b.attr("class"),n;d="ON";h="OFF";c=!1;a.each(["switch-mini","switch-small","switch-large"],function(a,b){0<=m.indexOf(b)&&(k=b)});b.addClass("has-switch");void 0!==b.data("on")&&(f="switch-"+b.data("on"));void 0!==b.data("on-label")&&(d=b.data("on-label"));void 0!==b.data("off-label")&&(h=b.data("off-label"));void 0!==b.data("icon")&&(c=b.data("icon"));d=a("<span>").addClass("switch-left").addClass(k).addClass(f).html(d);
f="";void 0!==b.data("off")&&(f="switch-"+b.data("off"));f=a("<span>").addClass("switch-right").addClass(k).addClass(f).html(h);h=a("<label>").html("&nbsp;").addClass(k).attr("for",b.find("input").attr("id"));c&&h.html('<i class="'+c+'"></i>');c=b.find(":checkbox").wrap(a("<div>")).parent().data("animated",!1);!1!==b.data("animated")&&c.addClass("switch-animate").data("animated",!0);c.append(d).append(h).append(f);b.find(">div").addClass(b.find("input").is(":checked")?"switch-on":"switch-off");b.find("input").is(":disabled")&&
a(this).addClass("deactivate");var p=function(a){a.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")};b.on("keydown",function(b){32===b.keyCode&&(b.stopImmediatePropagation(),b.preventDefault(),p(a(b.target).find("span:first")))});d.on("click",function(b){p(a(this))});f.on("click",function(b){p(a(this))});b.find("input").on("change",function(b){var c=a(this),d=c.parent(),e=c.is(":checked"),f=d.is(".switch-off");b.preventDefault();d.css("left","");f===e&&(e?d.removeClass("switch-off").addClass("switch-on"):
d.removeClass("switch-on").addClass("switch-off"),!1!==d.data("animated")&&d.addClass("switch-animate"),d.parent().trigger("switch-change",{el:c,value:e}))});b.find("label").on("mousedown touchstart",function(b){var c=a(this);n=!1;b.preventDefault();b.stopImmediatePropagation();c.closest("div").removeClass("switch-animate");c.closest(".has-switch").is(".deactivate")?c.unbind("click"):(c.on("mousemove touchmove",function(b){var c=a(this).closest(".switch");b=((b.pageX||b.originalEvent.targetTouches[0].pageX)-
c.offset().left)/c.width()*100;n=!0;25>b?b=25:75<b&&(b=75);c.find(">div").css("left",b-75+"%")}),c.on("click touchend",function(b){var c=a(this),d=a(b.target).siblings("input");b.stopImmediatePropagation();b.preventDefault();c.unbind("mouseleave");n?d.prop("checked",!(-25>parseInt(c.parent().css("left")))):d.prop("checked",!d.is(":checked"));n=!1;d.trigger("change")}),c.on("mouseleave",function(b){var c=a(this),d=c.siblings("input");b.preventDefault();b.stopImmediatePropagation();c.unbind("mouseleave");
c.trigger("mouseup");d.prop("checked",!(-25>parseInt(c.parent().css("left")))).trigger("change")}),c.on("mouseup",function(b){b.stopImmediatePropagation();b.preventDefault();a(this).unbind("mousemove")}))})})},toggleActivation:function(){a(this).toggleClass("deactivate")},isActive:function(){return!a(this).hasClass("deactivate")},setActive:function(b){b?a(this).removeClass("deactivate"):a(this).addClass("deactivate")},toggleState:function(b){var c=a(this).find("input:checkbox");c.prop("checked",!c.is(":checked")).trigger("change",
b)},setState:function(b,c){a(this).find("input:checkbox").prop("checked",b).trigger("change",c)},status:function(){return a(this).find("input:checkbox").is(":checked")},destroy:function(){var b=a(this).find("div");b.find(":not(input:checkbox)").remove();b=b.children();b.unwrap().unwrap();b.unbind("change");return b}};if(c[d])return c[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof d&&d)a.error("Method "+d+" does not exist!");else return c.init.apply(this,arguments)}})(jQuery);
$(function(){$(".switch").bootstrapSwitch()});var base,names,completedCount,lahCookie,$library,$item,candyPack=[270,271,272,273,274,275,276,277,278,279,280,291,292,293,294,295,296,297,298,299,320,321,322,323,324,325,326,327,328,329];function getQueryOption(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(location.search);return null==a?!1:decodeURIComponent(a[1].replace(/\+/g," "))}
function cleanHeader(){$library.find("h3").html(completedCount?"Remaining Elements":"&nbsp;");$item.hide().filter(":not(.completed)").show()}function cleanQueries(a){a=a?a:[];-1==$.inArray("completed",a)&&$("#showCompleted").removeClass("btn-purple").addClass("btn-light").find("span").html("show");-1==$.inArray("filter",a)&&$("#filter").trigger("clear");-1==$.inArray("search",a)&&$("#search").trigger("clear")}
function filterMake(a){a?(cleanQueries(["filter"]),$item.show(),$item.filter(":data(composition[!*]="+a+")").hide().end(),$library.find("h3").html("Things you can make with: "+a).end().find(".clearQuery").show()):cleanHeader()}
function filterSearch(a){a?(cleanQueries(["search"]),$item.hide(),$item.find("h5:contains('"+a.toLowerCase()+"')").parent().show(),$item.filter(":visible").size()?$library.find("h3").html("Elements found with: "+a).end().find(".clearQuery").show():$library.find("h3").html("Nothing found")):cleanHeader()}function buildMake(a,d){var c,b=[];for(c in a)-1<a[c].composition.indexOf(d)&&b.push(c);return b.join(", ")}
var CookieClass=function(){this.name="lah";this.cookie=$.cookie(this.name);this.imported=!1;this.set=function(d){$.cookie(this.name)||$.cookie(this.name,d);var c=$.cookie(this.name).split("|");c.push(d);c=c.unique();$.cookie(this.name,c.unique().join("|"));completedCount=c.length;a()};this.getAll=function(){if(!$.cookie(this.name)&&!getQueryOption("import"))return[];getQueryOption("import")&&!this.imported&&($.cookie(this.name,getQueryOption("import").split(",").join("|")),this.imported=!0);var d=
$.cookie(this.name).split("|");if(isNaN(parseInt(d[0]))){var c=[];for(i=0;i<d.length;i++){var b=names.indexOf(d[i]);c.push(b)}d.length==c.length&&($.cookie(this.name,c.join("|")),d=c)}d=$.map(d,function(a){return parseInt(a)});completedCount=d.length;a();return d};this.remove=function(d){if(!$.cookie(this.name))return!1;var c=$.cookie(this.name).split("|");-1<$.inArray(d,c)&&c.splice($.inArray(d,c),1);c=c.unique();$.cookie(this.name,c.join("|"));completedCount=c.length;a()};this.reset=function(){$.removeCookie(this.name);
this.cookie=void 0;completedCount=0;a()};var a=function(){var a=-1<$library.find("h3").html().indexOf("with");completedCount?($("#completedOptions").show(),a||$library.find("h3").html("Remaining Elements")):($("#completedOptions").hide(),a||$library.find("h3").html("&nbsp;"));$("#completedCount").find("span").html(completedCount)}};
$(function(){$library=$("#library");lahCookie=new CookieClass;$.getJSON("assets/base.json",function(a){base=a.base;$.getJSON("assets/names.json",function(a){names=a.lang;if(base&&names){var c,b,e="",g=[],f=[],h=[];for(a=0;a<base.length;a++){f=[];4>a&&g.push([]);for(c=4;c<base.length;c++){h=[];for(b=0;b<base[c].length;b++)base[c][b][0]!=a&&base[c][b][1]!=a||f.push(names[c]),h.push(names[base[c][b][0]]+" + "+names[base[c][b][1]]);4<=a&&g.push(h)}-1==$.inArray(a,candyPack)&&(c=-1<$.inArray(a,lahCookie.getAll()),
e+='<li id="'+a+'" title="'+names[a]+'" class="item thumbnail'+(f.length?"":" finalElement")+(c?" completed":"")+'" data-composition="'+g[a].join(";")+'" data-make="'+f.join(", ")+'">\n',e+='\t<div class="buttons"><a href="#" class="info"><i class="icon-eye-open"></i></a><a href="#" title="mark as completed" class="adder"></a><a href="#" title="things you can make with..." class="filter'+(f.length?"":" disabled")+'">'+(f.length?'<i class="icon-external-link-sign"></i>':"")+"</a></div>\n",e+='\t<div class="image"><img src="assets/blank_icon.png" data-src="http://littlealchemy.com/img/base/'+
(a+1)+'.png"/></div>\n',e+="\t<h5>"+names[a]+"</h5>\n",e+="</li>\n")}$library.find("ul").append(e);$item=$library.find(".item");$item.filter(":gt(3)").sortElements(function(a,b){return $(a).prop("title")>$(b).prop("title")?1:-1});$item.tooltip();$item.find("img").unveil();$library.find("h3").html(completedCount?"Remaining Elements":"&nbsp;");$("header h3").html(base.length+" elements")}else $library.find("ul").append('<li class="warning">Something went wrong. Please try again.</li>')})});"iframe"==
getQueryOption("type")&&(getQueryOption("version")?setTimeout(function(){$("#reloader").is(":visible")&&$("#reloader").fadeOut()},7500):$("#reloader").find("span").html("You are using an old version of the bookmarklet. Please remove it from your bookmarks bar and drag again<h5>"+$("blockquote").find("h5").html()+"</h5>"),$("#reloader").show(),$("header.jumbotron h4").hide(),$("#showCheats").prop("checked",!0).change());$(document).on("click",".item:not(.completed) .adder",function(a){a.preventDefault();
a=$(this);lahCookie.set(a.parents(".item").prop("id"));a.parents(".item").addClass("completed").hide()}).on("click",".item.completed .adder",function(a){a.preventDefault();a=$(this);lahCookie.remove(a.parents(".item").prop("id"));a.parents(".item").removeClass("completed")}).on("click",".item .filter",function(a){a.preventDefault();a=$(this).parents(".item").find("h5").html();$("#filter").val(a).change();filterMake(a)});$library.find(".clearQuery").on("click",function(a){a.preventDefault();cleanHeader();
cleanQueries();$(this).hide()});$("#helpBtn").on("click",function(){$("#help").slideToggle()});$("#filter").on("keydown",function(a){if(13==a.keyCode||13==a.which)filterMake($(this).val()),$(this).focus()}).clearSearch({callback:filterMake});$("#search").on("keydown",function(a){if(13==a.keyCode||13==a.which)filterSearch($(this).val()),$(this).focus()}).clearSearch({callback:filterSearch});$("#showCompleted").on("click",function(){var a=$(this);$library.find(".clearQuery").hide();a.hasClass("btn-light")?
(cleanQueries(["completed"]),a.find("span").html("hide"),$item.show(),$library.find("h3").html("All Elements")):(a.find("span").html("show"),$library.find("h3").html("Remaining Elements"),$item.filter(".completed").hide());a.toggleClass("btn-light").toggleClass("btn-purple")});$("#resetCompleted").on("click",function(){var a=$(this);a.hasClass("btn-light")?(a.toggleClass("btn-light").toggleClass("btn-danger"),a.find("span").html("Are you sure?"),setTimeout(function(){a.hasClass("btn-light")||a.toggleClass("btn-light").toggleClass("btn-danger").find("span").html("reset completed")},
3E3)):a.hasClass("btn-danger")&&(a.toggleClass("btn-light").toggleClass("btn-danger").find("span").html("reset completed"),$item.removeClass("completed").show(),lahCookie.reset())});$("#hideFinal").on("click",function(){$(".clearable").trigger("clear");$("#hideFinal:checked").length?$("div.finalElement").hide():$("div.finalElement").show()});$(document).on("click",".alert .close",function(){$(this).parent().fadeOut()});$.dataSelector("!*",function(a,d){return-1==a.indexOf(d.toLowerCase())})});
